{% extends "my_base.html" %}
{% block breadcrumb %}
    <a href="{{ url_for('admin.view_courses') }}">
        <pb> Kursy</pb>
    </a>
    /
    <a href="{{ url_for('admin.view_course', course_name = exercise.lesson.course.name) }}">
        <pb> {{ exercise.lesson.course.name }} </pb>
    </a>
    /
    <a href="{{ url_for('admin.view_lesson', lesson_name = exercise.lesson.name) }}">
        <pb> {{ exercise.lesson.name }} </pb>
    </a>
    /
    <a href="{{ url_for('admin.view_exercise', exercise_id = exercise.id) }}">
        <pb> {{ exercise.name }} </pb>
    </a>

{% endblock %}
{% block app_content %}
    <div><h2>{{ exercise.name }}</h2></div>
    <hr>
    <div><h1>{{ exercise.content }}</h1></div>
    <div><h1>Możliwe punkty: {{ exercise.get_max_points() }}</h1></div>
    <div><h1>Termin: {{ exercise.end_date }}</h1></div>
    <div><h1>Maksymalna liczba podejść: {{ exercise.max_attempts }}</h1></div>
    <div><h1>Testy: </h1></div>
    <hr>
    {% for test in exercise.tests %}
        <div><p>Output: <a href="{{ url_for('admin.download', id=test.id, domain='test', filename=test.output_name) }}"
                           target="_blank"> {{ test.output_name }}</a></p></div>
        <div><p>Input: <a href="{{ url_for('admin.download', id=test.id, domain='test', filename=test.input_name) }}"
                          target="_blank"> {{ test.input_name }}</a></p></div>
        <div><p>Punkty: {{ test.points }}</p></div>
        <button type="button"
                onclick="window.location.href='{{ url_for('admin.delete_test', test_id = test.id ) }}'"
                class="btn btn-danger">Usuń test
        </button>
        <hr>
    {% endfor %}
    <button type="button"
            onclick="window.location.href='{{ url_for('admin.add_test', exercise_id = exercise.id ) }}'"
            class="btn btn-success">Dodaj test
    </button>
    {% if exercise.is_published %}
        <button type="button"
                onclick="window.location.href='{{ url_for('admin.activate_exercise', exercise_id = exercise.id ) }}'"
                class="btn btn-info">Dezaktywuj zadanie
        </button>
    {% else %}
        <button type="button"
                onclick="window.location.href='{{ url_for('admin.activate_exercise', exercise_id = exercise.id ) }}'"
                class="btn btn-info">Aktywuj zadanie
        </button>
    {% endif %}

    <button type="button"
            onclick="window.location.href='{{ url_for('admin.view_solutions', course = exercise.get_course().name, lesson = exercise.lesson.name, exercise=exercise.name) }}'"
            class="btn btn-secondary">Zobacz rozwiązania
    </button>
{% endblock %}